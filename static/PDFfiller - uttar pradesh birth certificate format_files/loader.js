webpackJsonp([8],{427:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.calcLoaderImgClassNames=t.countStartPercents=void 0;var s=n(3),a=r(s),i=n(1),c=r(i),l=n(2),o=r(l),d=n(5),u=r(d),f=n(4),m=r(f),p=n(20),h=r(p),v=n(6),k=r(v),g=n(14),_=r(g),P=n(0),w=r(P),y=n(167),E=r(y),I=n(9),N=r(I),S=t.countStartPercents=function(e){return e.reduce(function(e,t,n,r){return[].concat((0,_.default)(e),[(0,k.default)({},t,{startPercent:n?e[n-1].startPercent+r[n-1].percent:0})])},[])},x=t.calcLoaderImgClassNames=function(e,t){return e.reduce(function(e,n,r){return(0,k.default)({},e,(0,h.default)({},"document-loader__img--step-"+(r+1),t>=n.startPercent&&(t<n.startPercent+n.percent||n.startPercent+n.percent===100)))},{})},T=S([{timingFunction:function(e){return e*(2-e)},text:"Establishing secure connection",percent:60},{text:"Loading PDF editor",percent:30},{timingFunction:function(e){return 1-Math.pow(e-1,4)},text:"Loading document",percent:10}]),L=function(e){function t(e){(0,c.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={progress:0,hidden:!1,finished:!1,steps:T},n.stepsIndexes={connection:0,document:1,editor:2},n.ticker=null,n.tickFn=null,n.tickValue=0,n}return(0,m.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.startTicker(),this.setStep({stepIndex:this.stepsIndexes.connection})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.ticker)}},{key:"resetTicker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.tickValue=e,this.tickFn=t}},{key:"setStagesPercents",value:function(e){this.setState({steps:S(this.state.steps.map(function(t,n){return(0,k.default)({},t,{percent:void 0!==e[n]?e[n]:t.percent})}))})}},{key:"stopTicker",value:function(){this.ticker&&(this.resetTicker(0,null),clearInterval(this.ticker),this.ticker=null)}},{key:"startTicker",value:function(){var e=this;this.ticker||(this.ticker=setInterval(function(){if(!e.hidden&&!e.handleWindowLoaderProgress()&&e.tickFn){var t=e.tickValue/400;t<=1&&(e.tickFn(t),e.tickValue+=1)}},50))}},{key:"handleWindowLoaderProgress",value:function(){var e=void 0!==window.loader_progress;return e&&this.setProgress(window.loader_progress,!0),e}},{key:"setStep",value:function(e){var t=this,n=e.stepIndex,r=e.startValue,s=void 0===r?0:r,a=e.persist,i=void 0!==a&&a,c=this.state.steps[n].timingFunction;!i&&c?this.resetTicker(s,function(e){return t.setStepProgress({percent:100*c(e),stepIndex:n})}):(this.resetTicker(),this.setStepProgress({percent:s,stepIndex:n,persist:i}))}},{key:"setStepProgress",value:function(e){var t=e.stepIndex,n=e.percent,r=e.persist,s=void 0!==r&&r;if(void 0===window.loader_progress||s){var a=this.state.steps[t];this.setState({progress:a.startPercent+a.percent*n/100})}}},{key:"setProgress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.state.steps,r=(0,E.default)(n,function(t){return t.startPercent<e}),s=n[r];this.setStep({stepIndex:r,percent:e-s.startPercent/s.percent,persist:t})}},{key:"finish",value:function(){this.stopTicker(),this.setState({progress:100,finished:!0})}},{key:"hide",value:function(){this.setState({hidden:!0})}},{key:"show",value:function(){this.resetTicker(0,null),this.startTicker(),this.setState({hidden:!1})}},{key:"render",value:function(){if(this.state.hidden||this.state.finished)return null;var e=this.state,t=e.progress,n=e.steps;return w.default.createElement("div",{className:"document-loader-overlay"},w.default.createElement("div",{className:"document-loader"},w.default.createElement("div",{className:"document-loader__title"},"Loading, Please wait a moment…"),w.default.createElement("div",{className:"document-loader-row"},w.default.createElement("div",{className:"document-loader-row_cell document-loader-row_cell--img"},w.default.createElement("div",{className:(0,N.default)("document-loader__img",x(n,t))}),w.default.createElement("div",{className:"document-loader__title document-loader__title--mobile"},"Loading",w.default.createElement("div",null,"Please wait a moment…"))),w.default.createElement("div",{className:"document-loader-row_cell"},w.default.createElement("ul",{className:"document-loader-list"},n.map(function(e,n){var r=e.text,s=e.percent,a=e.startPercent;return w.default.createElement("li",{className:(0,N.default)({"document-loader-list-item":!0,"document-loader-list-item--loading":t>=a&&t<a+s,"document-loader-list-item--loaded":t>=a+s}),key:n},r)})))),w.default.createElement("div",{className:"document-loader-progress"},w.default.createElement("div",{style:{width:t+"%"},className:"document-loader-progress__inner"}))))}}]),t}(P.Component);t.default=L},522:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=n(0),a=r(s),i=n(23),c=r(i),l=n(427),o=r(l);window.LoaderInstance=c.default.render(a.default.createElement(o.default,null),document.getElementById("loader"))}},[522]);
//# sourceMappingURL=loader.a5db1a1cc5ac7e6b1f8b.js.map